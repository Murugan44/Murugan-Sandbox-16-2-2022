<!--
   @description       : 
   @author            : ChangeMeIn@UserSettingsUnder.SFDoc
   @group             : 
   @last modified on  : 08-31-2021
   @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
   Modifications Log 
   Ver   Date         Author                               Modification
   1.0   04-21-2021   ChangeMeIn@UserSettingsUnder.SFDoc   Initial Version
   -->
   <template>
      <lightning-button variant="brand"
         label="New Policy Schedule"
         title="New Policy Schedule"
         onclick={Step1}
         class="slds-m-left_x-small">
      </lightning-button>
      <template if:true={isOpen}>
         <section role="dialog"  tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_large back_drop" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" >
            <div class="slds-modal__container">
               <header class="slds-modal__header">
                  <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                     <lightning-icon icon-name="utility:close"
                        alternative-text="close"
                        variant="inverse"
                        size="small" ></lightning-icon>
                     <span class="slds-assistive-text">Close</span>
                  </button>
                  <template if:true={isStep1}>
                     <lightning-progress-indicator current-step="step1" type="path" variant="base">
                        <template for:each={steps} for:item="step">
                           <lightning-progress-step label={step.label} value={step.value} key={step.label} ></lightning-progress-step>
                        </template>
                     </lightning-progress-indicator>
                  </template>
                  <template if:true={isStep2}>
                     <lightning-progress-indicator current-step="step2" type="path" variant="base">
                        <template for:each={steps} for:item="step">
                           <lightning-progress-step label={step.label} value={step.value} key={step.label} ></lightning-progress-step>
                        </template>
                     </lightning-progress-indicator>
                  </template>
                  <template if:true={isStep3}>
                     <lightning-progress-indicator current-step="step3" type="path" variant="base">
                        <template for:each={steps} for:item="step">
                           <lightning-progress-step label={step.label} value={step.value} key={step.label} ></lightning-progress-step>
                        </template>
                     </lightning-progress-indicator>
                  </template>

               </header>
               <template if:true={isStep1}>
                  <div class="slds-modal__content slds-p-around_large" id="modal-content-id-1">
                     <div class="">
                        <lightning-record-edit-form>
                           <div class="slds-p-around_medium">
                              <div class="color-only card-head slds-p-around_medium">
                                 <div class="slds-text-color_inverse">Company Information</div>
                              </div>
                              <lightning-messages></lightning-messages>
                              <div class="card slds-p-around_large slds-box slds-box_small">
                                 <lightning-input variant="label-inline" type="text" label="Company Name" value="Clovetrix" read-only></lightning-input>
                                 <lightning-input variant="label-inline" type="text" label="Broker Name" value="Clovetrix Broker" read-only></lightning-input>
                                 <lightning-input variant="label-inline" type="number" label="Broker Commission" value="123.45" formatter="currency" step="0.01" read-only></lightning-input>
                                 <lightning-input variant="label-inline" type="date" label="Inception Date" value="2020-09-07" read-only></lightning-input>
                                 <lightning-input variant="label-inline" type="date" label="Expiry Date" value="2021-09-07" read-only></lightning-input>
                                 <lightning-input variant="label-inline" type="text" label="Company Type" value="Consultant" read-only></lightning-input>
                                 <lightning-combobox name="Industry" label="Industry" value={value} options={industryOptions} variant="label-inline"></lightning-combobox>
                                 <lightning-combobox name="Territory" label="Territory" value={value1} options={territoryOptions} variant="label-inline"></lightning-combobox>
                                 </br>
                                 <div class="slds-grid slds-gutters">
                                    <!-- <div class="">
                                       <p style="font-size: 12px;">Exposure Type</p>
                                       </div> -->
                                    <!-- <p style="font-size: 12px;">Exposure Type</p> -->
                                    <p style="font-size: 12px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exposure Type &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                    <!-- <div> -->
                                    <lightning-input type="checkbox" label="Asset Value"></lightning-input>
                                    <lightning-input type="checkbox" label="Market Capitalization"></lightning-input>
                                    <!-- </div> -->
                                 </div>
                                 </br>
                                 <lightning-input variant="label-inline" type="number" label="Asset Value (USD)" formatter="currency"></lightning-input>
                              </div>
                           </div>
                        </lightning-record-edit-form>
                        <div class="slds-p-around_medium">
                           <lightning-record-edit-form>
                              <div class="color-only card-head">
                                 <div class="slds-text-color_inverse">Rating Factors</div>
                              </div>
                              <div class="card slds-p-around_large slds-box slds-box_small">
                                 <lightning-messages></lightning-messages>
                                 <lightning-input variant="label-inline" type="number" label="% of Assets within US" formatter="percent-fixed"></lightning-input>
                                 <lightning-combobox name="Listing Territory" label="Listing Territory" value={valueLT} options={listingTerritoryOptions} variant="label-inline"></lightning-combobox>
                                 <lightning-combobox name="Industry Hazard Level" label="Indstry Hazard Level" value={valueHL} options={indstryHazardLevelOptions} variant="label-inline"></lightning-combobox>
                                 <lightning-combobox name="Mapped Territory" label="Mapped Territory" value={valueMT} options={mappedTerritoryOptions} variant="label-inline"></lightning-combobox>
                                 <lightning-combobox name="Litigation/Claims Within Past Year?" label="Litigation/Claims Within Past Year?" value={valueLC} options={yearOptions} variant="label-inline"></lightning-combobox>
                              </div>
                           </lightning-record-edit-form>
                        </div>
                     </div>
                  </div>
                  <footer class="slds-modal__footer">
                     <template if:true={isStep1}>
                        <button class="slds-button slds-button_brand" onclick={Step2} title="Next">Next</button>
                        <button class="slds-button slds-button_brand" onclick={closeModal} title="Cancel">Cancel</button>
                     </template>
                  </footer>
               </template>
               <template if:true={isStep2}>
                  <div class="slds-modal__content  slds-p-around_large slds-scrollable_none" id="modal-content-id-2">
                     <div class="color-only card-head slds-p-around_medium">
                        <div class="slds-text-color_inverse">Exposure</div>
                     </div>
                     <div class="slds-modal__content slds-scrollable_y card margin-bottom slds-p-around_large slds-box slds-box_small" id="modal-content-id-02">
                        <lightning-record-edit-form>
                           <lightning-messages></lightning-messages>
                           </br>
                           <lightning-layout multiple-rows="true">
                              <template for:each={optionsMap} for:item="fa" for:index="index">
                                 <lightning-layout-item size="6" key={fa.key} >
                                    <lightning-combobox variant="label-inline" label={fa.key} access-key={index} id={index} options={fa.value} onchange={handleOptionChange}></lightning-combobox>
                                 </lightning-layout-item>
                              </template>
                           </lightning-layout>
                           </br>
                           <div class="slds-grid slds-gutters">
                              <div class="slds-col slds-size_1-of-2">
                                 <lightning-input variant="label-inline" type="number" label="CREDIT (Augur) SCORE"></lightning-input>
                              </div>
                              <div class="slds-col slds-size_1-of-2">
                                 <lightning-input variant="label-inline" type="number" label="Corporate Governance score"></lightning-input>
                              </div>
                           </div>
                           </br>
                           <lightning-button variant="brand" label="New Addhoc Factor" title="New Addhoc Factor" onclick={addFactor} class="slds-m-left_x-small"></lightning-button>
                           </br>
                           </br>
                           <template if:true={isFactor}>
                              <div class="slds-box">
                                 <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                                    <tbody>
                                       <template for:each={factorList} for:item="fac" for:index="index">
                                          <tr key={keyIndex}>
                                             <th scope="col">
                                                <div>
                                                   <lightning-input variant="label-hidden" value={fac.description} placeholder="Enter description"  type = "text" access-key={index} id={index}></lightning-input>
                                                </div>
                                             </th>
                                             <th scope="col">
                                                <lightning-input variant="label-hidden" value={fac.reason} placeholder="Enter reason" type = "text"  access-key={index} id={index}></lightning-input>
                                             </th>
                                             <th scope="col">
                                                <lightning-input variant="label-hidden" value={fac.relativity} placeholder="Enter relativity" type = "text" access-key={index} id={index}></lightning-input>
                                             </th>
                                             <th scope="col">
                                                <lightning-button label="Remove" class="slds-m-left_x-small" access-key={index} id={index} onclick={removeFactor}></lightning-button>
                                             </th>
                                          </tr>
                                       </template>
                                    </tbody>
                                 </table>
                              </div>
                           </template>
                           </br>
                           <div class="slds-grid slds-gutters">
                              <div class="slds-col slds-size_1-of-2">
                                 <lightning-input variant="label-inline" type="number" label="Deductible(USD)" formatter="currency"></lightning-input>
                              </div>
                              <div class="slds-col slds-size_1-of-2">
                              </div>
                           </div>
                           </br>
                        </lightning-record-edit-form>
                     </div>
                  </div>
                  <footer class="slds-modal__footer">
                     <template if:true={isStep2}>
                        <button class="slds-button slds-button_brand" onclick={Previous1} title="Previous">Previous</button>
                        <button class="slds-button slds-button_brand" onclick={Step3} title="Next">Next</button>
                        <button class="slds-button slds-button_brand" onclick={closeModal} title="Cancel">Cancel</button>
                     </template>
                  </footer>
               </template>
               <template if:true={isStep3}>
                  <div class="slds-modal__content slds-p-around_large slds-scrollable_none" id="modal-content-id-3">
                     <div class="color-only card-head slds-p-around_medium">
                        <div class="slds-text-color_inverse">Layers</div>
                     </div>
                     <div class="card margin-bottom3 slds-p-around_large slds-box slds-box_small">
                        <lightning-record-edit-form>
                           <lightning-messages></lightning-messages>
                           <lightning-combobox name="ILF Layer" label="ILF Layer" value={valueILF} options={iLFOptions} variant="label-inline"></lightning-combobox>
                           <lightning-input variant="label-inline" type="number" label="Limit(USD)" formatter="currency"></lightning-input>
                           <lightning-input variant="label-inline" type="number" label="Attachment(USD)" formatter="currency"></lightning-input>
                        </lightning-record-edit-form>
                     </div>
                  </div>
                  <footer class="slds-modal__footer">
                     <template if:true={isStep3}>
                        <button class="slds-button slds-button_brand" onclick={Previous2} title="Previous">Previous</button>
                        <button class="slds-button slds-button_brand" onclick={Finish} title="Finish">Finish</button>
                        <button class="slds-button slds-button_brand" onclick={closeModal} title="Cancel">Cancel</button>
                     </template>
                  </footer>
               </template>
            </div>
            </div>
         </section>
         <div class="slds-backdrop slds-backdrop_open"></div>
      </template>
   </template>